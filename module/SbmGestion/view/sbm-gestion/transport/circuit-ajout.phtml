<?php
/**
 * Page de création d'un circuit
 *
 *
 * @project sbm
 * @package SbmGestion
 * @filesource view/sbm-gestion/transport/circuit-ajout.phtml
 * @encodage UTF-8
 * @author DAFAP Informatique - Alain Pomirol (dafap@free.fr)
 * @date 22 mai 2019
 * @version 2019-2.5.0
 */
$this->headLink()->appendStylesheet($this->basePath('/css/fam-icons-custom.css'));
$this->themeCss('sbm-gestion/transport', 'circuit-fiche.css');
$this->jQuery();
$this->themeJS('gestion-transport','circuit-edit.js');
$this->themeJS('commun', 'checkallbox.js');
$this->inlineScript()->captureStart();
?>
multicheckbox_actions.init("wrapper-semaine");
js_actions.initajout();
<?php
$this->inlineScript()->captureEnd();
$js = 'window.document.getElementById(\'op\').value=%s;';
$url_retour = $this->url('sbmgestion/transport',
    [
        'action' => 'circuit-liste',
        'page' => $this->page
    ]);
$hiddens = [];
$actions = [
    'retour' => [
        'class' => 'fam-door-out',
        'formaction' => $url_retour,
        'title' => 'Retour',
        'onclick' => sprintf($js, "'retour'")
    ]
];
?>
<h1>Création d'un nouveau point d'arrêt sur un circuit</h1>
<div id="fiche-wrapper">
	<div id="fiche-header">
		<div class="menu clearfix">
        <?= $this->listeZoneActions($hiddens, $actions);?>
        </div>
	</div>
	<div id="fiche-inner">
        <?= $this->form()->openTag($this->form);?>
        <?= $this->formHidden($this->form->get('circuitId'));?>
        <?= $this->formHidden($this->form->get('millesime'));?>
        <?= $this->formHidden($this->form->get('csrf'));?>
    	<fieldset class="sbm-page1">
			<div id="wrapper-serviceId" class="row-inner serviceId">
				<?= $this->formRow($this->form->get('serviceId')); ?></div>
			<div id="wrapper-stationId" class="row-inner stationId">
				<?= $this->formRow($this->form->get('stationId')); ?></div>
			<div class="clearfix">
				<div class="tiers float-left">
					<div id="wrapper-passage" class="row-inner">
						<?= $this->formRow($this->form->get('passage')); ?></div>
					<div id="wrapper-montee" class="row-inner">
						<?= $this->formRow($this->form->get('montee')); ?></div>
				</div>
				<div class="tiers float-left">
					<div id="wrapper-distance" class="row-inner">
						<?= $this->formRow($this->form->get('distance')); ?></div>
					<div id="wrapper-descente" class="row-inner">
						<?= $this->formRow($this->form->get('descente')); ?></div>
				</div>
				<div id="wrapper-semaine" class="row-inner tiers-droite float-left">
					<?= $this->formRow($this->form->get('semaine')); ?></div>
			</div>
			<fieldset class="horaires">
				<legend class="horaires">
					<div class="legend">Jours</div>
					<div class="legend">Horaires aller</div>
					<div class="legend">Horaires retour</div>
				</legend>
				<div id="wrapper-horaires-content" class="content">
				<?php for ($i=1; $i<=3; $i++):?>
					<div id="horaire<?= $i;?>" class="ligne">
						<div id="wrapper-nature-horaire<?= $i;?>" class="row-inner nature">
							<?= 'nature'//$this->formRow($this->form->get("horaire$i")); ?></div>
						<div id="wrapper-m<?= $i;?>" class="row-inner aller">
							<?= $this->formRow($this->form->get("m$i")); ?></div>
						<div id="wrapper-s<?= $i;?>" class="row-inner retour1">
							<?= $this->formRow($this->form->get("s$i")); ?></div>
						<div id="wrapper-z<?= $i;?>" class="row-inner retour2">
							<?= $this->formRow($this->form->get("z$i")); ?></div>
					</div>
				<?php endfor;?>
				</div>
			</fieldset>
			<div id="wrapper-emplacement" class="row-inner">
				<?= $this->formRow($this->form->get('emplacement')); ?></div>
			<div id="wrapper-typeArret" class="row-inner">
				<?= $this->formRow($this->form->get('typeArret')); ?></div>
			<div class="clearfix">
				<div id="commentaire-aller" class="row-inner float-left cols-2">
					<div id="wrapper-commentaire1" class="row-inner">
						<?= $this->formRow($this->form->get('commentaire1')); ?></div>
				</div>
				<div id="copy" class="float-left left-10px">
					<br /> <input id="comment-copy" type="button"
						class="fam-comments-add"
						title="Copier le commentaire aller comme commentaire retour">
				</div>
				<div id="commentaire-retour"
					class="row-inner ajout float-left cols-2 left-10px">
					<div id="wrapper-commentaire2" class="row-inner">
						<?= $this->formRow($this->form->get('commentaire2')); ?></div>
				</div>
			</div>
			<div id="wrapper-buttons" class="row-inner">
        		<?= $this->formSubmit($this->form->get('submit'));?>
        		<?= $this->formSubmit($this->form->get('cancel'));?></div>
		</fieldset>
<?= $this->form()->closeTag(); ?>
</div> <?php // fiche-inner ?>
<div id="fiche-footer"></div>
</div>